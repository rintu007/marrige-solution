$(function(){$(".alert-error").fadeOut(5e3),$(".alert-info").fadeOut(5e3),$(".alert-success").fadeOut(5e3)}),$(document).ready(function(){$(document).on("click",".btn-upload-private-photo",function(e){e.preventDefault(),$(".input-private-photos").click()})}),$(document).ready(function(){$(".select2").select2(),$(".userAutoRender").hide()}),$(document).ready(function(){var n=1;$(window).scroll(function(){if($(window).scrollTop()+$(window).height()>=$(document).height()-400){var e=$(".userAutoLastPage").attr("data-lastpage"),t=$(".userAutoLastPage").attr("data-url");n<e&&(o=n+=1,i=t,$.ajax({url:i+"?page="+o,dataType:"json",beforeSend:function(){$(".loadingUserAuto").show()},complete:function(){$(".loadingUserAuto").hide()}}).done(function(e){$(".userAuto").append(e)}).fail(function(){$(".loadingUserAuto").html("<p>No More Data.</p>")}))}var o,i})}),$(document).ready(function(){var c="",a=document.getElementById("crop-cover-image");$(document).on("click","#btn-cover",function(e){e.preventDefault(),$("#my_coverpic").click()}),$("#my_coverpic").change(function(){var e=$(this).val().split(".").pop().toLowerCase();if(-1==$.inArray(e,["gif","png","jpg","jpeg"]))return alert("invalid extension!"),!1;!function(e,n,a,r){{if(void 0===e.files)return alert("This browser does not support HTML5.");var t=new FileReader;t.readAsDataURL(e.files[0]),t.onload=function(e){var i=new Image;i.src=e.target.result,i.onload=function(){var e,t=this.height,o=this.width;if(t<a||o<n)return swal({title:"Unsupported Image",text:"Image Must Be at least "+n+"px width and "+a+"px height.",type:"error",timer:1e4,confirmButtonText:"Close"}),!1;r.src=i.src,e=r,$(".btn-cover").hide(),$(".btn-profilepic").hide(),$(".btn-cover-submit").show(),$(".btn-cover-cancel").show(),e.style.display="",$(".fb-image-lg").hide(),c=new Cropper(e,{aspectRatio:810/214,viewMode:2,dragMode:"move",responsive:!0,restore:!0,checkOrientation:!0,modal:!0,guides:!0,highlight:!0,background:!1,autoCrop:!0,autoCropArea:1,zoomable:!1,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!1,minContainerWidth:162,minContainerHeight:60,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:810,minCropBoxHeight:214,crop:function(e){$("#offset_x").val(e.detail.x),$("#offset_y").val(e.detail.y),$("#new_width").val(e.detail.width),$("#new_height").val(e.detail.height)}})}}}}(this,810,214,a)}),$(document).on("click",".btn-cover-cancel",function(){c.destroy(),a.src="",a.style.display="none",$(".fb-image-lg").show(),$(".btn-cover").show(),$(".btn-profilepic").show(),$(".btn-cover-submit").hide(),$(".btn-cover-cancel").hide()}),$(document).on("submit","#form_cover_uploade",function(e){e.preventDefault();var t=$(this),o=t.attr("action"),i=t.attr("method"),n=new FormData(this);$.ajax({url:o,type:i,data:n,contentType:!1,cache:!1,processData:!1}).done(function(e){$(".profile-cover-image").empty().append(e),c.destroy(),a.src="",a.style.display="none",$(".btn-cover-submit").hide(),$(".btn-cover-cancel").hide(),$(".btn-cover").show(),$(".btn-profilepic").show(),$(".fb-image-lg").show()}).fail(function(){alert("fail")})})}),$(document).ready(function(){var c="",a=document.getElementById("crop-profilepic");document.getElementById("btn-profilepic").onclick=function(){document.getElementById("my_profilepic").click()},$("#my_profilepic").change(function(){var e=$(this).val().split(".").pop().toLowerCase();if(-1==$.inArray(e,["gif","png","jpg","jpeg"]))return!1;!function(e,n,a,r){{if(void 0===e.files)return alert("This browser does not support HTML5.");var t=new FileReader;t.readAsDataURL(e.files[0]),t.onload=function(e){var i=new Image;i.src=e.target.result,i.onload=function(){var e,t=this.height,o=this.width;return t<a||o<n?(swal({title:"Unsupported Image",text:"Image Must Be at least "+n+"px width and "+a+"px height.",type:"error",timer:1e4,confirmButtonText:"Close"}),!1):3e3<t||3e3<o?(swal({title:"Unsupported Image",text:"Image too large. Image with must be less than 3000px width and 3000px height.",type:"error",timer:1e4,confirmButtonText:"Close"}),!1):(r.src=i.src,e=r,$(".btn-profilepic").hide(),$(".btn-cover").hide(),$(".btn-profilepic-submit").show(),$(".btn-profilepic-cancel").show(),e.style.display="",$(".fb-image-profile").hide(),void(c=new Cropper(e,{aspectRatio:1,viewMode:2,dragMode:"move",responsive:!0,restore:!0,checkOrientation:!0,modal:!0,guides:!0,highlight:!0,background:!1,autoCrop:!0,autoCropArea:1,zoomable:!1,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!1,minContainerWidth:160,minContainerHeight:160,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:160,minCropBoxHeight:160,crop:function(e){$("#off_x").val(e.detail.x),$("#off_y").val(e.detail.y),$("#change_width").val(e.detail.width),$("#change_height").val(e.detail.height)}})))}}}}(this,160,160,a)}),$(document).on("click",".btn-profilepic-cancel",function(){c.destroy(),a.src="",a.style.display="none",$(".fb-image-profile").show(),$(".btn-profilepic").show(),$(".btn-cover").show(),$(".btn-profilepic-submit").hide(),$(".btn-profilepic-cancel").hide()}),$(document).on("submit","#form_profilepic_upload",function(e){e.preventDefault();var t=$(this),o=t.attr("action"),i=t.attr("method"),n=new FormData(this);$.ajax({url:o,type:i,data:n,contentType:!1,cache:!1,processData:!1}).done(function(e){$(".profile-image").empty().append(e),c.destroy(),a.src="",a.style.display="none",$(".btn-profilepic-submit").hide(),$(".btn-profilepic-cancel").hide(),$(".btn-profilepic").show(),$(".btn-cover").show(),$(".fb-image-profile").show()}).fail(function(){alert("fail")})})});