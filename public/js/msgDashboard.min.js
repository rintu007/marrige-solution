$(document).ready(function(){$(".message-list").slimScroll({height:"300px",size:"3px",color:"gray",start:"bottom"}),$(".my-chats").slimScroll({height:"280px",size:"3px",color:"gray"})}),$(function(){$(document).on("click",".chatSingle",function(t){t.preventDefault();var a=$(this),e=a.attr("href");a.closest(".products-list").find(".item").removeClass("list-selected"),$.ajax({url:e,type:"GET",dataType:" json",cache:!1}).done(function(t){$(".msgForm").empty().append(t.formOldMsg),$(".message-list").slimScroll({height:"300px",size:"3px",color:"gray",start:"bottom"}),a.closest("li").addClass("list-selected"),$(".input_box").val("").css("height","65px"),setTimeout("$('.input_box').focus().css('background-color', 'white');",500);var i=1;$(".message-list").scroll(function(t){if(0==$(this).scrollTop()){var a=$(".dataLastPage").attr("data-lastpage"),e=$(".dataLastPage").attr("data-url");i<a&&(s=e,o=i+=1,$.ajax({url:s+"?page="+o,dataType:"json",beforeSend:function(){$(".loadingMessages").show()},complete:function(){$(".loadingMessages").hide()}}).done(function(t){$(".message-list").find(".previousChatMessage").prepend(t)}).fail(function(){$(".loadingMessages").html("<p>No More Data.</p>")}),$(this).animate({scrollTop:15},"slow"))}var s,o})}).fail(function(){alert("error")})})}),$(function(){var o=1;$(".my-chats").scroll(function(){if($(this).scrollTop()+$(this).innerHeight()>=$(this)[0].scrollHeight-20){var t=$(".chatsLastPage").attr("data-lastpage"),a=$(".chatsLastPage").attr("data-url");if(!(o<t))return!1;e=a,s=o+=1,$.ajax({url:e+"?page="+s,dataType:"json",beforeSend:function(){$(".loadingChats").show()},complete:function(){$(".loadingChats").hide()}}).done(function(t){$(".chatsAuto").append(t)}).fail(function(){$(".loadingChats").html("<p>No More Data.</p>")})}var e,s})}),$(function(){var i=1;$(".message-list").scroll(function(t){if(0==$(this).scrollTop()){var a=$(".dataLastPage").attr("data-lastpage"),e=$(".dataLastPage").attr("data-url");i<a&&(s=e,o=i+=1,$.ajax({url:s+"?page="+o,dataType:"json",beforeSend:function(){$(".loadingMessages").show()},complete:function(){$(".loadingMessages").hide()}}).done(function(t){$(".message-list").find(".previousChatMessage").prepend(t)}).fail(function(){$(".loadingMessages").html("<p>No More Data.</p>")}),$(this).animate({scrollTop:15},"slow"))}var s,o})}),$(function(){$(".newChatMessage").attr("data-url");$(".input_box").val("").css("height","65px"),$(document).on("click","#btn_msg_post_final",function(t){t.preventDefault();var a=$(this).closest("form"),e=a.attr("action"),s=a.attr("method"),o=a.serialize();$.ajax({url:e,type:s,cache:!1,dataType:"json",data:o,beforeSend:function(){$(".input_box").val("").css("height","65px")},complete:function(){}}).done(function(t){$(".input_box").val("").css("height","65px"),setTimeout("$('.input_box').focus().css('background-color', 'white');",500),$(".newChatMessage").append(t.newMsgSingle),$(".message-list").animate({scrollTop:$(".message-list")[0].scrollHeight},1e3)}).fail(function(){})}),$(document).on("click","#btn_msg_new_final",function(t){t.preventDefault();var a=$(this),e=a.closest("form"),s=e.attr("action"),o=e.attr("method"),i=e.serialize();$.ajax({url:s,type:o,cache:!1,dataType:"json",data:i}).done(function(t){$(".msgForm").empty().append(t.formOldMsg),$(".chatsAuto").empty().append(t.newChatto),$(".message-list").slimScroll({height:"300px",size:"3px",color:"gray",start:"bottom"}),$(".my-chats").slimScroll({height:"300px",size:"3px",color:"gray"}),a.closest("li").addClass("list-selected"),$(".input_box").val("").css("height","65px"),setTimeout("$('.input_box').focus().css('background-color', 'white');",500);var i=1;$(".message-list").scroll(function(t){if(0==$(this).scrollTop()){var a=$(".dataLastPage").attr("data-lastpage"),e=$(".dataLastPage").attr("data-url");i<a&&(s=e,o=i+=1,$.ajax({url:s+"?page="+o,dataType:"json",beforeSend:function(){$(".loadingMessages").show()},complete:function(){$(".loadingMessages").hide()}}).done(function(t){$(".message-list").find(".previousChatMessage").prepend(t)}).fail(function(){$(".loadingMessages").html("<p>No More Data.</p>")}),$(this).animate({scrollTop:15},"slow"))}var s,o})}).fail(function(){})})});